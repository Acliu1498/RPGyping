{"changed":true,"filter":false,"title":"TeacherSignUpPage.php","tooltip":"/TeacherSignUpPage.php","value":"<!-- https://d4deaa4e1e2043fdb438c522a96c778b.vfs.cloud9.us-east-2.amazonaws.com/StudentSignInPage.php -->\n<?php session_start(); ?>\n<html>\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/intro.css\">\n</html>\n    <p><a href=\"Homepage.html\">Homepage</a></p>\n    <p><a href=\"Teacher_Profile.php\">Next</a></p>\n    <body>  <!-- background=\"images/maxresdefault.jpg\"--> \n    <p>Create a Teacher Account</p>\n    <img src=\"images/teacher.jpg\" width=\"300\" height=\"300\">\n\n    <!-- Need to figure out how to connect mysql with aws cloud9 since different than old version -->\n    <?php\n    /*$servername = getenv('IP');\n    $username = getenv('C9_USER');\n    $password = \"\";\n    $database = \"egr302\";\n    $dbport = 3306;\n    \n    $db = new mysqli($servername, $username, $password, $database, $dbport); */\n    $servername = \"127.0.0.1\";\n    $username = \"root\";\n    $password = \"egr302\";\n\n    // Create connection\n    $conn = new mysqli($servername, $username, $password);\n\n    // Check connection\n    if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n    } \n    echo \"Connected successfully\";\n    ?>\n    <!-- Checks if user input matches constraints -->\n     <?php\n     if (isset($_POST[\"Next\"])) {\n         $firstname = $_POST[\"firstname\"];\n         if(strlen($firstname) == 0) {\n             $firstNameError = TRUE;\n         }\n         $lastname = $_POST [\"lastname\"];\n         if (strlen($lastname)==0) {\n             $lastNameError = TRUE;\n         }\n         $lastname = $_POST[\"lastname\"];\n        $username = $_POST[\"username\"];\n        if (strlen($username) == 0) {\n            $nameError = TRUE; \n           \n        } \n        $password = $_POST[\"pw\"];\n        if (strlen($password) == 0 || !preg_match(\"/^[A-Za-z0-9]{8,20}$/\", $password)) { #or if not in right format  8-20 alphanumeric\n            $pwError = TRUE;\n        } \n        $email = $_POST[\"email\"];\n        if (strlen($email) == 0 || !preg_match(\"/^.+@.+\\..{3}$/\",$email)) { #or if not in right format (regex)\n            $emailError = TRUE;\n           \n        }\n        $hash = password_hash($password, PASSWORD_DEFAULT); #hashes password to store in db\n        #if the retyped pw is not the same as the stored hashed pw, then error\n        if (!password_verify($_POST[\"samepassword\"], $hash) /* || !preg_match(\"/^[A-Za-z0-9]{8,20}$/\", $_POST[\"samepassword\"])*/) {\n            $invalidpwError = TRUE;\n          //check if runs right cause this is different than line 56 on student\n        }\n        $code = $_POST[\"code\"];\n        if (strlen($code) == 0 || !preg_match(\"/^[A-Za-z0-9]{3,6}$/\", $code)) {\n            $codeError = TRUE;\n        }\n        \n        else {\n            //need to specify values rather than just have them in\n            //need to insert value into parent table first since teacher references it\n            $mysql = \"INSERT INTO teacher_TBL(firstName, lastName, username, password, email, teacherAccessCode)\n            VALUES ('\" .$firstName. \"', '\" .$lastName. \"', '\" .$username. \"', '\" .$hash. \"', '\" .$email. \"', \" .$accessCode. \")\";\n            // $mysql = \"INSERT INTO teacher_TBL VALUES ('\" . \n            //     $teacherID. \"', '\".\n            //     $firstname. \"', '\" . \n            //     $lastname . \"', '\". \n            //     $username. \"','\" .\n            //     $hash. \"','\".\n            //     $email. \"', '\" .\n            //     $accessCode.\"', '\".\n            //     $schoolID[\"fk_schoolID\"]. \n            //     \"')\";\n            $insert = mysqli_query($connection, $mysql);\n            if (!$insert){\n                print(\"Error inserting values into table\");\n            }else {\n                $SESSION[\"username\"] = $username;\n                #will direct to homepage for now until create character page created\n                header(\"Location: Homepage.html\");\n            }\n        }\n    }\n    ?>\n    \n    <!--Creates form for students to sign in using POST method -->\n        <form action=\"TeacherSignUpPage.php\" method=\"post\">\n        \n        Enter first name:<input type = \"text\" name = \"firstname\" /> * <?php firstNameError($firstNameError) ?> </br>\n        Enter last name:<input type = \"text\" name = \"lastname\" /> * <?php lastNameError($lastNameError) ?> </br>\n        Create a username:<input type =\"text\" name=\"username\"/> * <?php nameError($nameError) ?> </br>\n        Email:<input type =\"text\" name=\"email\"/> * <?php emailError($emailError) ?> </br>\n        Create Password:<input type =\"password\" name=\"pw\"/> * <?php pwError($pwError) ?> </br>\n        Re-type Password:<input type =\"password\" name=\"samepw\"/> * <?php invalidpwError($invalidpwError) ?> </br>\n        Teacher Access Code:<input type=\"text\" name=\"code\"/> * <?php codeError($codeError) ?> </br>\n        <input type=\"submit\"  class=\"button\" name=\"Next\"/>\n    </form>\n    \n    <!-- Error functions that print errors -->\n    <?php\n    function firstNameError($firstNameError=FALSE) {\n        if ($firstNameError) {\n            print \"First name required\";\n        }\n    }\n    function lastNameError($lastNameError= FALSE) {\n        if ($lastNameError) {\n            print \"Last name required\";\n        }\n    }\n    function nameError($nameError=FALSE) {\n        if ($nameError) {\n            print \"Username required\";\n        }\n    }\n    function pwError($pwError=FALSE) {\n        if ($pwError) {\n            print \"Invalid Password. Password needs to be 8-20 alphanumeric characters\";\n        }\n    }\n    function emailError($emailError=FALSE) {\n        if ($emailError) {\n            print \"Invalid Email\";\n        }\n    }\n    function invalidpwError($invalidpwError) {\n        if ($invalidpwError) {\n            print \"Invalid Password\";\n        }\n    }\n    function codeError($codeError) {\n        if ($codeError) {\n            print \"Invalid Code\";\n        }\n    }\n    ?> \n    <p>Student accounts are free to play and learn how to type.</p>\n        <p>They can be linked to a parent account but hold the permissions to do so.</p> \n        <p>They can also be linked with a teacher's access code in order to earn</p>\n        <p>credit for a class or earn extra credit for practicing.</p>\n    </body>\n</html>","undoManager":{"mark":-581,"position":100,"stack":[[{"start":{"row":72,"column":14},"end":{"row":72,"column":15},"action":"remove","lines":["c"],"id":622}],[{"start":{"row":72,"column":14},"end":{"row":72,"column":15},"action":"insert","lines":["n"],"id":623}],[{"start":{"row":72,"column":15},"end":{"row":72,"column":16},"action":"insert","lines":["e"],"id":624}],[{"start":{"row":72,"column":16},"end":{"row":72,"column":17},"action":"insert","lines":["e"],"id":625}],[{"start":{"row":72,"column":17},"end":{"row":72,"column":18},"action":"insert","lines":["d"],"id":626}],[{"start":{"row":72,"column":18},"end":{"row":72,"column":19},"action":"insert","lines":[" "],"id":627}],[{"start":{"row":72,"column":19},"end":{"row":72,"column":20},"action":"insert","lines":["t"],"id":628}],[{"start":{"row":72,"column":20},"end":{"row":72,"column":21},"action":"insert","lines":["o"],"id":629}],[{"start":{"row":72,"column":21},"end":{"row":72,"column":22},"action":"insert","lines":[" "],"id":630}],[{"start":{"row":72,"column":22},"end":{"row":72,"column":23},"action":"insert","lines":["c"],"id":631}],[{"start":{"row":72,"column":23},"end":{"row":72,"column":24},"action":"insert","lines":["r"],"id":632}],[{"start":{"row":72,"column":24},"end":{"row":72,"column":25},"action":"insert","lines":["e"],"id":633}],[{"start":{"row":72,"column":25},"end":{"row":72,"column":26},"action":"insert","lines":["a"],"id":634}],[{"start":{"row":72,"column":26},"end":{"row":72,"column":27},"action":"insert","lines":["t"],"id":635}],[{"start":{"row":72,"column":27},"end":{"row":72,"column":28},"action":"insert","lines":["e"],"id":636}],[{"start":{"row":72,"column":28},"end":{"row":72,"column":29},"action":"insert","lines":[" "],"id":637}],[{"start":{"row":72,"column":28},"end":{"row":72,"column":29},"action":"remove","lines":[" "],"id":638}],[{"start":{"row":72,"column":27},"end":{"row":72,"column":28},"action":"remove","lines":["e"],"id":639}],[{"start":{"row":72,"column":26},"end":{"row":72,"column":27},"action":"remove","lines":["t"],"id":640}],[{"start":{"row":72,"column":25},"end":{"row":72,"column":26},"action":"remove","lines":["a"],"id":641}],[{"start":{"row":72,"column":24},"end":{"row":72,"column":25},"action":"remove","lines":["e"],"id":642}],[{"start":{"row":72,"column":23},"end":{"row":72,"column":24},"action":"remove","lines":["r"],"id":643}],[{"start":{"row":72,"column":22},"end":{"row":72,"column":23},"action":"remove","lines":["c"],"id":644}],[{"start":{"row":72,"column":22},"end":{"row":72,"column":23},"action":"insert","lines":["i"],"id":645}],[{"start":{"row":72,"column":23},"end":{"row":72,"column":24},"action":"insert","lines":["n"],"id":646}],[{"start":{"row":72,"column":24},"end":{"row":72,"column":25},"action":"insert","lines":["v"],"id":647}],[{"start":{"row":72,"column":24},"end":{"row":72,"column":25},"action":"remove","lines":["v"],"id":648}],[{"start":{"row":72,"column":24},"end":{"row":72,"column":25},"action":"insert","lines":["s"],"id":649}],[{"start":{"row":72,"column":25},"end":{"row":72,"column":26},"action":"insert","lines":["e"],"id":650}],[{"start":{"row":72,"column":26},"end":{"row":72,"column":27},"action":"insert","lines":["r"],"id":651}],[{"start":{"row":72,"column":27},"end":{"row":72,"column":28},"action":"insert","lines":["t"],"id":652}],[{"start":{"row":72,"column":28},"end":{"row":72,"column":29},"action":"insert","lines":[" "],"id":653}],[{"start":{"row":72,"column":29},"end":{"row":72,"column":30},"action":"insert","lines":["v"],"id":654}],[{"start":{"row":72,"column":30},"end":{"row":72,"column":31},"action":"insert","lines":["a"],"id":655}],[{"start":{"row":72,"column":31},"end":{"row":72,"column":32},"action":"insert","lines":["l"],"id":656}],[{"start":{"row":72,"column":32},"end":{"row":72,"column":33},"action":"insert","lines":["u"],"id":657}],[{"start":{"row":72,"column":33},"end":{"row":72,"column":34},"action":"insert","lines":["e"],"id":658}],[{"start":{"row":72,"column":34},"end":{"row":72,"column":35},"action":"insert","lines":[" "],"id":659}],[{"start":{"row":72,"column":35},"end":{"row":72,"column":36},"action":"insert","lines":["i"],"id":660}],[{"start":{"row":72,"column":36},"end":{"row":72,"column":37},"action":"insert","lines":["n"],"id":661}],[{"start":{"row":72,"column":37},"end":{"row":72,"column":38},"action":"insert","lines":["t"],"id":662}],[{"start":{"row":72,"column":38},"end":{"row":72,"column":39},"action":"insert","lines":["o"],"id":663}],[{"start":{"row":72,"column":39},"end":{"row":72,"column":40},"action":"insert","lines":[" "],"id":664}],[{"start":{"row":72,"column":40},"end":{"row":72,"column":41},"action":"insert","lines":["t"],"id":665}],[{"start":{"row":72,"column":41},"end":{"row":72,"column":42},"action":"insert","lines":["e"],"id":666}],[{"start":{"row":72,"column":42},"end":{"row":72,"column":43},"action":"insert","lines":["a"],"id":667}],[{"start":{"row":72,"column":42},"end":{"row":72,"column":43},"action":"remove","lines":["a"],"id":668}],[{"start":{"row":72,"column":41},"end":{"row":72,"column":42},"action":"remove","lines":["e"],"id":669}],[{"start":{"row":72,"column":40},"end":{"row":72,"column":41},"action":"remove","lines":["t"],"id":670}],[{"start":{"row":72,"column":40},"end":{"row":72,"column":41},"action":"insert","lines":["p"],"id":671}],[{"start":{"row":72,"column":41},"end":{"row":72,"column":42},"action":"insert","lines":["a"],"id":672}],[{"start":{"row":72,"column":42},"end":{"row":72,"column":43},"action":"insert","lines":["r"],"id":673}],[{"start":{"row":72,"column":43},"end":{"row":72,"column":44},"action":"insert","lines":["e"],"id":674}],[{"start":{"row":72,"column":44},"end":{"row":72,"column":45},"action":"insert","lines":["t"],"id":675}],[{"start":{"row":72,"column":45},"end":{"row":72,"column":46},"action":"insert","lines":["n"],"id":676}],[{"start":{"row":72,"column":46},"end":{"row":72,"column":47},"action":"insert","lines":[" "],"id":677}],[{"start":{"row":72,"column":46},"end":{"row":72,"column":47},"action":"remove","lines":[" "],"id":678}],[{"start":{"row":72,"column":45},"end":{"row":72,"column":46},"action":"remove","lines":["n"],"id":679}],[{"start":{"row":72,"column":44},"end":{"row":72,"column":45},"action":"remove","lines":["t"],"id":680}],[{"start":{"row":72,"column":44},"end":{"row":72,"column":45},"action":"insert","lines":["n"],"id":681}],[{"start":{"row":72,"column":45},"end":{"row":72,"column":46},"action":"insert","lines":["t"],"id":682}],[{"start":{"row":72,"column":46},"end":{"row":72,"column":47},"action":"insert","lines":[" "],"id":683}],[{"start":{"row":72,"column":47},"end":{"row":72,"column":48},"action":"insert","lines":["t"],"id":684}],[{"start":{"row":72,"column":48},"end":{"row":72,"column":49},"action":"insert","lines":["a"],"id":685}],[{"start":{"row":72,"column":49},"end":{"row":72,"column":50},"action":"insert","lines":["b"],"id":686}],[{"start":{"row":72,"column":50},"end":{"row":72,"column":51},"action":"insert","lines":["l"],"id":687}],[{"start":{"row":72,"column":51},"end":{"row":72,"column":52},"action":"insert","lines":["e"],"id":688}],[{"start":{"row":72,"column":52},"end":{"row":72,"column":53},"action":"insert","lines":[" "],"id":689}],[{"start":{"row":72,"column":53},"end":{"row":72,"column":54},"action":"insert","lines":["f"],"id":690}],[{"start":{"row":72,"column":54},"end":{"row":72,"column":55},"action":"insert","lines":["i"],"id":691}],[{"start":{"row":72,"column":55},"end":{"row":72,"column":56},"action":"insert","lines":["r"],"id":692}],[{"start":{"row":72,"column":56},"end":{"row":72,"column":57},"action":"insert","lines":["s"],"id":693}],[{"start":{"row":72,"column":57},"end":{"row":72,"column":58},"action":"insert","lines":["t"],"id":694}],[{"start":{"row":72,"column":58},"end":{"row":72,"column":59},"action":"insert","lines":[" "],"id":695}],[{"start":{"row":72,"column":59},"end":{"row":72,"column":60},"action":"insert","lines":["s"],"id":696}],[{"start":{"row":72,"column":60},"end":{"row":72,"column":61},"action":"insert","lines":["i"],"id":697}],[{"start":{"row":72,"column":61},"end":{"row":72,"column":62},"action":"insert","lines":["n"],"id":698}],[{"start":{"row":72,"column":62},"end":{"row":72,"column":63},"action":"insert","lines":["c"],"id":699}],[{"start":{"row":72,"column":63},"end":{"row":72,"column":64},"action":"insert","lines":["e"],"id":700}],[{"start":{"row":72,"column":64},"end":{"row":72,"column":65},"action":"insert","lines":[" "],"id":701}],[{"start":{"row":72,"column":65},"end":{"row":72,"column":66},"action":"insert","lines":["t"],"id":702}],[{"start":{"row":72,"column":66},"end":{"row":72,"column":67},"action":"insert","lines":["e"],"id":703}],[{"start":{"row":72,"column":67},"end":{"row":72,"column":68},"action":"insert","lines":["a"],"id":704}],[{"start":{"row":72,"column":68},"end":{"row":72,"column":69},"action":"insert","lines":["c"],"id":705}],[{"start":{"row":72,"column":69},"end":{"row":72,"column":70},"action":"insert","lines":["h"],"id":706}],[{"start":{"row":72,"column":70},"end":{"row":72,"column":71},"action":"insert","lines":["e"],"id":707}],[{"start":{"row":72,"column":71},"end":{"row":72,"column":72},"action":"insert","lines":["r"],"id":708}],[{"start":{"row":72,"column":72},"end":{"row":72,"column":73},"action":"insert","lines":[" "],"id":709}],[{"start":{"row":72,"column":73},"end":{"row":72,"column":74},"action":"insert","lines":["r"],"id":710}],[{"start":{"row":72,"column":74},"end":{"row":72,"column":75},"action":"insert","lines":["e"],"id":711}],[{"start":{"row":72,"column":75},"end":{"row":72,"column":76},"action":"insert","lines":["f"],"id":712}],[{"start":{"row":72,"column":76},"end":{"row":72,"column":77},"action":"insert","lines":["e"],"id":713}],[{"start":{"row":72,"column":77},"end":{"row":72,"column":78},"action":"insert","lines":["r"],"id":714}],[{"start":{"row":72,"column":78},"end":{"row":72,"column":79},"action":"insert","lines":["e"],"id":715}],[{"start":{"row":72,"column":79},"end":{"row":72,"column":80},"action":"insert","lines":["n"],"id":716}],[{"start":{"row":72,"column":80},"end":{"row":72,"column":81},"action":"insert","lines":["c"],"id":717}],[{"start":{"row":72,"column":81},"end":{"row":72,"column":82},"action":"insert","lines":["e"],"id":718}],[{"start":{"row":72,"column":82},"end":{"row":72,"column":83},"action":"insert","lines":["s"],"id":719}],[{"start":{"row":72,"column":83},"end":{"row":72,"column":84},"action":"insert","lines":[" "],"id":720}],[{"start":{"row":72,"column":84},"end":{"row":72,"column":85},"action":"insert","lines":["i"],"id":721}],[{"start":{"row":72,"column":85},"end":{"row":72,"column":86},"action":"insert","lines":["t"],"id":722}]]},"ace":{"folds":[],"scrolltop":894.03125,"scrollleft":0,"selection":{"start":{"row":72,"column":86},"end":{"row":72,"column":86},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":60,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1521598061646}